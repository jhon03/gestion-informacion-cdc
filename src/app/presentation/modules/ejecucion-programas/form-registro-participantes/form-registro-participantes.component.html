<div class="form-container">
<form [formGroup]="formularioProgramaForm" (ngSubmit)="onSubmit()">



    <!-- Select del programa -->
   <mat-form-field appearance="fill" class="full-width">
  <mat-label>Selecciona un programa</mat-label>
  <mat-select id="nombrePrograma" formControlName="nombrePrograma">
    <mat-option *ngFor="let programa of programas" [value]="programa.nombrePrograma">
      {{ programa.nombrePrograma }}
    </mat-option>
  </mat-select>
  <mat-error *ngIf="formularioProgramaForm.get('nombrePrograma')?.hasError('required')">
    Selecciona un programa
  </mat-error>
</mat-form-field>


    <!-- Campos dinÃ¡micos -->
  <div formArrayName="campos">
    <div *ngFor="let campo of campos.controls; let i = index" [formGroupName]="i" class="campo-dinamico-bloque">
      <mat-form-field appearance="outline" class="full-width">
      <label>Nombre del Campo</label>
      <input matInput id="nombre" formControlName="nombre" placeHolder="nombre del campo"/>
      <mat-error *ngIf="campo.get('nombre')?.invalid">Campo obligatorio</mat-error>
      </mat-form-field>

  <mat-form-field appearance="outline" class="full-width">
      <label for="tipo">Tipo de dato</label>
      <input matInput id="tipo" formControlName="tipo" placeHolder="tipo de dato/text/number/fecha"/>
      <mat-error *ngIf="campo.get('tipo')?.invalid">Campo obligatorio</mat-error>
    </mat-form-field>

      <button type="button" (click)="eliminarCampo(i)">Eliminar Campo</button>
    </div>
  </div>

    <!-- Botones -->
  <button type="button" (click)="agregarCampo()">Agregar Campo</button>
  <button type="submit" [disabled]="formularioProgramaForm.invalid || isSubmitting">
    {{ isSubmitting ? 'Enviando...' : 'Crear Formulario' }}
  </button>

</form>
</div>
